{"version":3,"sources":["Modules/Genres/genres-helper.js","Modules/People/people-detail-media.js","Modules/People/people-detail-person.js","Modules/People/people-detail-knowfor.js","Modules/People/people-credit-info.js","Modules/Component/link-menu.js"],"names":["getGenreName","genres","input","result","length","filter","genre","id","i","map","item","push","connect","Genres","movie","media","className","title","arr","node","key","toString","name","renderGenre","genre_ids","src","backdrop_path","release_date","character","overview","PersonSection","person","profile_path","known_for_department","MemoButton","React","memo","props","onClick","label","prevProps","nextProps","OverviewComponent","forwardRef","ref","text","MemoOverview","OverviewRef","Overview","createRef","useState","visible","setVisible","handleVisible","useCallback","useOnClickOutside","KnowForComponent","index","vote_average","PeopleCreditInfoLoading","withRouter","console","log","state","setState","loading","setLoading","creditId","location","useEffect","a","httpGet","response","status","json","fetchCredits","credit_type","known_for","LinkWithPopUp","LinkWithoutPopUp","activeClassName","to","link","LinkComponent","useRef","isOpen","setIsOpen","showPopup","handler","listener","event","current","contains","target","document","addEventListener","removeEventListener"],"mappings":"2GAAA,kCAOO,IAAMA,EAAe,SAACC,EAAQC,GACnC,IAAMC,EAAS,GAEf,GAAqB,IAAjBD,EAAME,OAAc,OAAO,EAC/B,GAAqB,IAAjBF,EAAME,OAAc,OAAOH,EAAOI,QAAO,SAAAC,GAAK,OAAIA,EAAMC,KAAOL,EAAM,MACzE,IAL6C,eAKpCM,GACPP,EAAOQ,KAAI,SAAAC,GACLA,EAAKH,KAAOL,EAAMM,IACpBL,EAAOQ,KAAKD,OAHTF,EAAI,EAAGA,EAAIN,EAAME,OAAQI,IAAM,EAA/BA,GAOT,OAAOL,I,iNCiBT,IAKeS,eALG,SAAC,GAEjB,MAAO,CAAEN,MAFuB,EAAbO,OACXC,SAIKF,EArBf,YAAyC,IAAjBG,EAAgB,EAAhBA,MAAOT,EAAS,EAATA,MAC7B,OACE,yBAAKU,UAAU,SACb,2CACA,2BAAID,EAAME,OACV,2BAnBN,SAAqBC,EAAKZ,GACxB,IAAIa,EAAO,GASX,OARYnB,YAAaM,EAAOY,GAC5BT,KAAI,SAAAC,GACNS,EAAKR,KACH,0BAAMK,UAAU,QAAQI,IAAKV,EAAKH,GAAGc,YAClCX,EAAKY,UAILH,EASCI,CAAYR,EAAMS,UAAWlB,IACjC,yBAAKU,UAAU,mBACb,yBAAKS,IAAG,0CAAqCV,EAAMW,kBAErD,sCAAYX,EAAMY,cAClB,wCAAcZ,EAAMa,WACpB,uCAAab,EAAMc,c,OCXVC,MAhBf,YAAoC,IAAXC,EAAU,EAAVA,OACvB,OACE,yBAAKf,UAAU,UACb,sCACA,yBAAKA,UAAU,kBACb,yBAAKS,IAAG,0CAAqCM,EAAOC,iBAEtD,yBAAKhB,UAAU,kBACb,2BACGe,EAAOE,qBADV,IACiCF,EAAOT,S,iBCU1CY,EAAaC,IAAMC,MAZD,SAAAC,GACtB,OACE,4BAAQrB,UAAU,cAAcsB,QAASD,EAAMC,SAC5CD,EAAME,UAKgB,SAACC,EAAWC,GACvC,OAAOD,EAAUD,QAAUE,EAAUF,SAMjCG,EAAoBP,IAAMQ,YAAW,SAACN,EAAOO,GACjD,OACE,yBAAK5B,UAAW,gBAAiB4B,IAAKA,GACpC,2BAAIP,EAAMQ,UASVC,EAAeX,IAAMC,KAAKM,GAJV,SAACF,EAAWC,GAChC,OAAOD,EAAUK,OAASJ,EAAUI,QAIhCE,EAAcJ,sBAAW,SAACN,EAAOO,GACrC,OAAO,kBAACE,EAAD,eAAcF,IAAKA,GAASP,OAKrC,SAASW,EAASX,GAChB,IAAMO,EAAMK,sBADW,EAEOC,oBAAS,GAFhB,mBAEhBC,EAFgB,KAEPC,EAFO,KAGjBC,EAAgBC,uBAAY,kBAAMF,GAAW,MAEnD,OADAG,4BAAkBX,GAAK,kBAAMQ,GAAW,MAEtC,6BACGD,EACC,kBAACJ,EAAD,CACEF,KAAMR,EAAM3B,KAAKmB,SACjBe,IAAKA,EACLxB,IAAKiB,EAAM3B,KAAKmB,WAGlB,kBAACK,EAAD,CACEK,MAAO,WACPD,QAASe,EACTjC,IAAKiB,EAAM3B,KAAKH,MAwCXiD,MAhCf,YAAsC,IAAV1C,EAAS,EAATA,MAC1B,OACEA,GACE,yBAAKE,UAAU,YACb,wBAAIA,UAAU,aAAd,aACCF,EAAML,KAAI,SAACC,EAAM+C,GAChB,OACE/C,EAAKgB,eACH,yBAAKV,UAAU,iBAAiBI,IAAKqC,EAAMpC,YACzC,yBAAKL,UAAU,aACb,2BACGN,EAAKO,MAAO,IACb,0BAAMD,UAAU,aAAhB,UACUN,EAAKgD,gBAInB,yBAAK1C,UAAU,iBACb,yBACES,IAAG,0CAAqCf,EAAKgB,kBAGjD,kBAACsB,EAAD,CAAUtC,KAAMA,UChFhC,SAASiD,IACP,OACE,yBAAK3C,UAAU,sBACb,yBAAKA,UAAU,SACf,yBAAKA,UAAU,UACf,yBAAKA,UAAU,YAsDNJ,uBALI,SAAC,GAElB,MAAO,CAAEN,MAFwB,EAAbO,OACZC,SAIKF,CAAoBgD,aA5CnC,SAA0BvB,GACxBwB,QAAQC,IAAI,mBAAoBzB,GADD,MAELa,mBAAS,IAFJ,mBAExBa,EAFwB,KAEjBC,EAFiB,OAGDd,oBAAS,GAHR,mBAGxBe,EAHwB,KAGfC,EAHe,KAI3BC,EAAW,KAmBf,OAlBI9B,EAAM+B,SAASL,OAAS1B,EAAM+B,SAASL,MAAMI,WAC/CA,EAAW9B,EAAM+B,SAASL,MAAMI,UAGlCE,qBAAU,WAAM,4CAEd,8BAAAC,EAAA,sEACyBC,YAAQ,aAAD,OAAcJ,IAD9C,UAE0B,OADlBK,EADR,QAEeC,OAFf,gCAGuBD,EAASE,OAHhC,OAGUA,EAHV,OAIIV,EAASU,GACTR,GAAW,GALf,4CAFc,sBACdA,GAAW,GADG,mCAWdS,KACC,CAACR,IAEAF,EAAgB,kBAACN,EAAD,MAElB,yBAAK3C,UAAU,cACZ6C,QAAQC,IAAI,QAASC,GACtB,yBAAK/C,UAAU,QACb,wBAAIA,UAAU,iBAAd,UAAsC+C,EAAMa,aAC5C,gDACA,yCAEF,kBAAC,EAAD,CAAc7D,MAAOgD,EAAMhD,QAC3B,kBAAC,EAAD,CAAegB,OAAQgC,EAAMhC,SAC7B,kBAAC,EAAD,CAAgBjB,MAAOiD,EAAMhC,OAAO8C,kB,oQC1DnC,SAASC,EAAczC,GAC5B,OAAO,0BAAMrB,UAAWqB,EAAMrB,WAAYqB,EAAME,OAG3C,SAASwC,EAAiB1C,GAC/B,OACE,kBAAC,IAAD,CACErB,UAAWqB,EAAMrB,UACjBgE,gBAAiB3C,EAAM2C,gBACvBC,GAAI5C,EAAM6C,MAET7C,EAAME,OAOE,SAAS4C,EAAc9C,GACpC,IAAMO,EAAMwC,mBAD+B,EAEflC,oBAAS,GAFM,mBAEpCmC,EAFoC,KAE5BC,EAF4B,KAK3C,OADA/B,EAAkBX,GAAK,kBAAM0C,GAAU,MAErC,0BAAMtE,UAAU,iBAAiBsB,QAAS,kBAAMgD,GAAU,KACvDjD,EAAMkD,UACL,kBAACT,EAAkBzC,GAEnB,kBAAC0C,EAAqB1C,GAEvBgD,EACC,yBACEzC,IAAKA,EACL5B,UAAWqE,EAAS,+BAAiC,cAEpDhD,EAAMkD,WAEP,MAMH,SAAShC,EAAkBX,EAAK4C,GACrCnB,qBACE,WACE,IAAMoB,EAAW,SAAAC,GAEV9C,EAAI+C,UAAW/C,EAAI+C,QAAQC,SAASF,EAAMG,SAI/CL,EAAQE,IAMV,OAHAI,SAASC,iBAAiB,YAAaN,GACvCK,SAASC,iBAAiB,aAAcN,GAEjC,WACLK,SAASE,oBAAoB,YAAaP,GAC1CK,SAASE,oBAAoB,aAAcP,MAS/C,CAAC7C,EAAK4C","file":"static/js/7.63ea16b5.chunk.js","sourcesContent":["/**\r\n * Produce as an array related with\r\n * state movies from reducers Genres and\r\n * input from array genre_ids of movie objects\r\n * @param {Array} genres\r\n * @param {Array} input\r\n */\r\nexport const getGenreName = (genres, input) => {\r\n  const result = [];\r\n\r\n  if (input.length === 0) return false;\r\n  if (input.length === 1) return genres.filter(genre => genre.id === input[0]);\r\n  for (let i = 0; i < input.length; i++) {\r\n    genres.map(item => {\r\n      if (item.id === input[i]) {\r\n        result.push(item);\r\n      }\r\n    });\r\n  }\r\n  return result;\r\n};\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport \"./people-detail-media.scss\";\r\nimport { getGenreName } from \"../Genres/genres-helper\";\r\n\r\n// Render Genre Inforation in Media Section\r\nfunction renderGenre(arr, genre) {\r\n  let node = [];\r\n  const res = getGenreName(genre, arr);\r\n  res.map(item => {\r\n    node.push(\r\n      <span className=\"genre\" key={item.id.toString()}>\r\n        {item.name}\r\n      </span>\r\n    );\r\n  });\r\n  return node;\r\n}\r\n\r\n// Render Media Section\r\nfunction MediaSection({ media, genre }) {\r\n  return (\r\n    <div className=\"media\">\r\n      <h3>Movie Media</h3>\r\n      <p>{media.title}</p>\r\n      <p>{renderGenre(media.genre_ids, genre)}</p>\r\n      <div className=\"images-backdrop\">\r\n        <img src={`https://image.tmdb.org/t/p/w500/${media.backdrop_path}`} />\r\n      </div>\r\n      <p>Release {media.release_date}</p>\r\n      <p>Character {media.character}</p>\r\n      <p>Overview {media.overview}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapToProp = ({ Genres }) => {\r\n  const { movie } = Genres;\r\n  return { genre: movie };\r\n};\r\n\r\nexport default connect(mapToProp)(MediaSection);\r\n","import React from \"react\";\r\nimport \"./people-detail-person.scss\";\r\n\r\n// PersonSection Component\r\nfunction PersonSection({ person }) {\r\n  return (\r\n    <div className=\"person\">\r\n      <h3>Person</h3>\r\n      <div className=\"images-profile\">\r\n        <img src={`https://image.tmdb.org/t/p/w185/${person.profile_path}`} />\r\n      </div>\r\n      <div className=\"person-profile\">\r\n        <p>\r\n          {person.known_for_department} {person.name}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonSection;\r\n","import React, {\r\n  useState,\r\n  useCallback,\r\n  useRef,\r\n  createRef,\r\n  forwardRef\r\n} from \"react\";\r\nimport \"./people-detail-knowfor.scss\";\r\nimport { useOnClickOutside } from \"../Component/link-menu\";\r\n\r\n// Render Memoize Button Component\r\nconst ButtonComponent = props => {\r\n  return (\r\n    <button className=\"know-button\" onClick={props.onClick}>\r\n      {props.label}\r\n    </button>\r\n  );\r\n};\r\n\r\nconst propsButtonComponent = (prevProps, nextProps) => {\r\n  return prevProps.label === nextProps.label;\r\n};\r\n\r\nconst MemoButton = React.memo(ButtonComponent, propsButtonComponent);\r\n\r\n// Render Memoize Overview Component\r\nconst OverviewComponent = React.forwardRef((props, ref) => {\r\n  return (\r\n    <div className={\"know-overview\"} ref={ref}>\r\n      <p>{props.text}</p>\r\n    </div>\r\n  );\r\n});\r\n\r\nconst propsOverview = (prevProps, nextProps) => {\r\n  return prevProps.text === nextProps.text;\r\n};\r\n\r\nconst MemoOverview = React.memo(OverviewComponent, propsOverview);\r\nconst OverviewRef = forwardRef((props, ref) => {\r\n  return <MemoOverview ref={ref} {...props} />;\r\n});\r\n\r\n// Overview Compoenent\r\n// Handling click with memoize component\r\nfunction Overview(props) {\r\n  const ref = createRef();\r\n  const [visible, setVisible] = useState(false);\r\n  const handleVisible = useCallback(() => setVisible(true));\r\n  useOnClickOutside(ref, () => setVisible(false));\r\n  return (\r\n    <div>\r\n      {visible ? (\r\n        <OverviewRef\r\n          text={props.item.overview}\r\n          ref={ref}\r\n          key={props.item.overview}\r\n        />\r\n      ) : (\r\n        <MemoButton\r\n          label={\"Overview\"}\r\n          onClick={handleVisible}\r\n          key={props.item.id}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Render KnowFor Component\r\nfunction KnowForComponent({ movie }) {\r\n  return (\r\n    movie && (\r\n      <div className=\"know-for\">\r\n        <h4 className=\"know-head\">Known For</h4>\r\n        {movie.map((item, index) => {\r\n          return (\r\n            item.backdrop_path && (\r\n              <div className=\"know-container\" key={index.toString()}>\r\n                <div className=\"know-name\">\r\n                  <p>\r\n                    {item.title}{\" \"}\r\n                    <span className=\"vote-rate\">\r\n                      Rating {item.vote_average}\r\n                    </span>\r\n                  </p>\r\n                </div>\r\n                <div className=\"know-backdrop\">\r\n                  <img\r\n                    src={`https://image.tmdb.org/t/p/w500/${item.backdrop_path}`}\r\n                  />\r\n                </div>\r\n                <Overview item={item} />\r\n              </div>\r\n            )\r\n          );\r\n        })}\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default KnowForComponent;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./people-detail.scss\";\r\nimport { withRouter } from \"react-router-dom\";\r\nimport { httpGet } from \"../../Helper/HttpFetch\";\r\nimport { connect } from \"react-redux\";\r\nimport MediaSection from \"./people-detail-media\";\r\nimport PersonSection from \"./people-detail-person\";\r\nimport KnowForSection from \"./people-detail-knowfor\";\r\n\r\n// Loading PeopleCreditInfoLoading Component\r\n// Only rendering div and animatation before\r\n// receive data from api\r\nfunction PeopleCreditInfoLoading() {\r\n  return (\r\n    <div className=\"detail-bio-loading\">\r\n      <div className=\"info\"></div>\r\n      <div className=\"media\"></div>\r\n      <div className=\"person\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// PeopleCreditInfoLoading Component\r\n// use local state to store data from response\r\n// api credits.\r\n// aovoid to pople hit the uri with query string.\r\n// query string should handle with conditions\r\nfunction PeopleCreditInfo(props) {\r\n  console.log(\"PeopleCreditInfo\", props);\r\n  const [state, setState] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  let creditId = null;\r\n  if (props.location.state && props.location.state.creditId) {\r\n    creditId = props.location.state.creditId;\r\n  }\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    async function fetchCredits() {\r\n      const response = await httpGet(`/3/credit/${creditId}`);\r\n      if (response.status === 200) {\r\n        const json = await response.json();\r\n        setState(json);\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchCredits();\r\n  }, [creditId]);\r\n\r\n  if (loading) return <PeopleCreditInfoLoading />;\r\n  return (\r\n    <div className=\"detail-bio\">\r\n      {console.log(\"state\", state)}\r\n      <div className=\"info\">\r\n        <h3 className=\"title-section\">Credit {state.credit_type}</h3>\r\n        <p>Department Acting</p>\r\n        <p>Job Actor</p>\r\n      </div>\r\n      <MediaSection media={state.media} />\r\n      <PersonSection person={state.person} />\r\n      <KnowForSection movie={state.person.known_for} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapToProps = ({ Genres }) => {\r\n  const { movie } = Genres;\r\n  return { genre: movie };\r\n};\r\n\r\nexport default connect(mapToProps)(withRouter(PeopleCreditInfo));\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport function LinkWithPopUp(props) {\r\n  return <span className={props.className}>{props.label}</span>;\r\n}\r\n\r\nexport function LinkWithoutPopUp(props) {\r\n  return (\r\n    <NavLink\r\n      className={props.className}\r\n      activeClassName={props.activeClassName}\r\n      to={props.link}\r\n    >\r\n      {props.label}\r\n    </NavLink>\r\n  );\r\n}\r\n\r\n// Module LinkComponent will render children props\r\n// when it set to use popup menu\r\nexport default function LinkComponent(props) {\r\n  const ref = useRef();\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  // Call hook passing in the ref and a function to call on outside click\r\n  useOnClickOutside(ref, () => setIsOpen(false));\r\n  return (\r\n    <span className=\"link-container\" onClick={() => setIsOpen(true)}>\r\n      {props.showPopup ? (\r\n        <LinkWithPopUp {...props} />\r\n      ) : (\r\n        <LinkWithoutPopUp {...props} />\r\n      )}\r\n      {isOpen ? (\r\n        <div\r\n          ref={ref}\r\n          className={isOpen ? \"popup-area popup-area-active\" : \"popup-area\"}\r\n        >\r\n          {props.showPopup}\r\n        </div>\r\n      ) : null}\r\n    </span>\r\n  );\r\n}\r\n\r\n// Click outside area handling\r\nexport function useOnClickOutside(ref, handler) {\r\n  useEffect(\r\n    () => {\r\n      const listener = event => {\r\n        // Do nothing if clicking ref's element or descendent elements\r\n        if (!ref.current || ref.current.contains(event.target)) {\r\n          return;\r\n        }\r\n\r\n        handler(event);\r\n      };\r\n\r\n      document.addEventListener(\"mousedown\", listener);\r\n      document.addEventListener(\"touchstart\", listener);\r\n\r\n      return () => {\r\n        document.removeEventListener(\"mousedown\", listener);\r\n        document.removeEventListener(\"touchstart\", listener);\r\n      };\r\n    },\r\n    // Add ref and handler to effect dependencies\r\n    // It's worth noting that because passed in handler is a new ...\r\n    // ... function on every render that will cause this effect ...\r\n    // ... callback/cleanup to run every render. It's not a big deal ...\r\n    // ... but to optimize you can wrap handler in useCallback before ...\r\n    // ... passing it into this hook.\r\n    [ref, handler]\r\n  );\r\n}\r\n"],"sourceRoot":""}